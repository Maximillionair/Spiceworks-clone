<%- include('partials/header', {title: 'My Tickets', path: '/tickets'}) %>

<h2>My Support Tickets</h2>
<%- include('partials/alerts') %>

<div class="card mb-3">
  <div class="card-header d-flex justify-between align-center">
    <h3>All Tickets</h3>
    <div class="filters">
      <select id="status-filter" class="form-control">
        <option value="">All Statuses</option>
        <option value="Open">Open</option>
        <option value="In Progress">In Progress</option>
        <option value="Resolved">Resolved</option>
      </select>
    </div>
  </div>
  <div class="card-body">
    <ul class="ticket-list" id="all-tickets-list">
      <!-- Tickets will be dynamically loaded here -->
      <li class="text-center">Loading tickets...</li>
    </ul>
  </div>
  <div class="card-footer" id="pagination-container">
    <!-- Pagination controls will be inserted here -->
  </div>
</div>

<!-- Ticket Details Modal -->
<div id="ticket-detail-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <div id="ticket-detail-content">
      <!-- Ticket details will be dynamically loaded here -->
    </div>
  </div>
</div>

<%- include('partials/footer') %>

<script src="/js/api.js" defer></script>
<script src="/js/auth.js" defer></script>
<script src="/js/tickets.js" defer></script>
<script src="/js/ticket-list.js" defer></script>